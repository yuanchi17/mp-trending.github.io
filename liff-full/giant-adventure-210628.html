<!doctype html><html><head><meta charset="UTF-8"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,viewport-fit=cover,user-scalable=no" name="viewport"><title>捷安特旅行社</title><meta content="捷安特旅行社，無限希望的力量。" name="description"><meta content="捷安特旅行社，無限希望的力量。" property="og:description"><meta content="zh_TW" property="og:locale"><meta content="微程式資訊 創新前瞻計畫室" property="og:site_name"><meta content="捷安特旅行社" property="og:title"><meta content="website" property="og:type"><link href="https://unpkg.com/bootstrap@4/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://unpkg.com/font-awesome@4/css/font-awesome.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet"><style>[v-cloak]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,body,h1,h2,h3,h4,h5,h6{font-family:"Noto Sans TC",sans-serif}</style><meta content="570" property="og:image:height"><meta content="1125" property="og:image:width"><meta content="https://i.imgur.com/KOVVPkY.png" property="og:image"><meta content="https://liff.line.me/1655757631-QKOK03Dx/giant-adventure-210628.html" property="og:url"><style>[v-cloak]{display:none}body{background:fixed #e7fef8 center bottom no-repeat;background-image:url(https://i.imgur.com/wAmC1XD.png)}.card{border:1px solid #abfecc;box-shadow:0 2px 3px rgba(40,70,20,.15)}.btn-img{border:1px solid #ddd;position:relative}.btn-img i.fa{position:absolute;right:0;color:#00894a}.btn.selected,.btn:focus{border:solid 3px #00894a;box-shadow:none}</style></head><body><script src="https://www.googletagmanager.com/gtag/js?id=G-SYT6P9ENET" async></script><script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],window.GA_MEASUREMENT_ID="G-SYT6P9ENET",gtag("js",new Date),gtag("config",window.GA_MEASUREMENT_ID,{send_page_view:!1}),(async()=>{let e=100;for(;e--&&(!window.liff||!window.liff.getVersion);)await(i=>new Promise(e=>{setTimeout(e,i)}))(100);const i=window.liff;gtag("set","user_properties",{liffVersion:i.getVersion(),...i.isInClient()?{lineVersion:i.getLineVersion()}:{}})})();</script><div class="container my-4 text-monospace" id="app" style="max-width:562.5px" v-cloak><h3 class="text-center font-color">防疫期間送關懷</h3><img class="w-100 mb-2" :key="'img-mission'" src="https://i.imgur.com/KOVVPkY.png"><div class="card"><div class="card-body"><h5 class="text-center font-weight-bold">挑選喜歡的小卡</h5><div class="mb-3" id="card"><div class="mx-n1 row" :key="`row-${cId}`" v-for="(chunk, cId) of _.chunk(cards, 2)"><div class="p-0 col" :key="imgur" v-for="imgur of chunk"><button @click="btnSelect(imgur)" class="p-0 btn btn-img m-2" :class="{'selected': selected === imgur}"><img class="w-100 rounded" :src="`https://i.imgur.com/${imgur}.png`"><i :class="selected === imgur ? 'fa-check-circle-o' : 'fa-circle-o'" class="p-0 fa m-1"></i></button></div></div></div><div class="form-group m-0"><textarea class="form-control" placeholder="想跟朋友說什麼呢？" v-model="text"></textarea></div></div></div><button @click="btnShare" class="btn btn-block btn-lg btn-success mt-3" :disabled="!selected || !text" type="button">送卡片給好友</button></div><script src="https://static.line-scdn.net/liff/edge/2/sdk.js" crossorigin="anonymous"></script><script src="https://unpkg.com/axios/dist/axios.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/dayjs/dayjs.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/jquery@3/dist/jquery.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/js-base64@2/base64.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/json5@2/dist/index.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/lodash@4/lodash.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/popper.js@1/dist/umd/popper.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/qs@6/dist/qs.js" crossorigin="anonymous"></script><script src="https://unpkg.com/sweetalert2@11" crossorigin="anonymous"></script><script src="https://unpkg.com/vue@2/dist/vue.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/papaparse@5/papaparse.min.js" crossorigin="anonymous"></script><script src="https://unpkg.com/bootstrap@4/dist/js/bootstrap.min.js" crossorigin="anonymous"></script><script src="https://yuanchi17.github.io/mp-trending.github.io/js/common.js?cachebust=1643003620986"></script><script>window.errToPlainObj=(()=>{const e=["address","code","data","dest","errno","info","message","name","path","port","reason","response.data","response.headers","response.status","stack","status","statusCode","statusMessage","syscall"];return s=>_.pick(s,e)})();</script><script>const loginPromise=(async()=>{if(await liff.init({liffId:"1655757631-QKOK03Dx"}),!liff.isLoggedIn())return liff.login({redirectUri:location.href}),new Promise(e=>{});let e={};try{e=await liff.getProfile(),gtag("set","user_id",e.userId)}catch(e){e.message=_.get(e,"response.data.message",e.message),console.error(window.errToPlainObj(e))}return e})(),campaign="捷安特旅行社210630";window.vm=new Vue({el:"#app",data:{cards:["LYPoRkM","vjEwRbs","vfbykKV","2bBiRsE"],msgs:null,selected:null,text:"",h:{source:null}},async mounted(){this.showLoading("請稍候","正在載入網頁");try{var e=JSON.parse(localStorage.getItem(location.pathname));e&&this.$set(this,"h",{...this.h,...e})}catch(e){}this.$watch("h",()=>{localStorage.setItem(location.pathname,JSON.stringify(this.h))},{deep:!0});try{await Promise.all([this.initGtag(),this.initTpl()]),this.hideLoading()}catch(e){e.message=_.get(e,"response.data.message",e.message),console.error(window.errToPlainObj(e)),await Swal.fire({icon:"error",title:"網頁讀取失敗",text:e.message})}},computed:{source(){return this.h.source||(this.h.source=this.param("source")),this.h.source||"未知"}},methods:{async initGtag(){await loginPromise;var e=this.param("referral",null);gtag("event","screen_view",{screen_name:`${campaign}-製作賀卡-${this.source}`}),gtag("event","join_group",{group_id:campaign}),e&&gtag("event","campaign_referral",{campaign:campaign,line_id:e})},async initTpl(){const t=_.template(_.get(await axios.get("/tpl/giant-adventure-210628.txt",{params:{cachebust:Date.now()},transformResponse:[]}),"data"));this.render=e=>t({_:_,dayjs:dayjs,Qs:Qs,...e})},async btnShare(){try{if(this.showLoading("請稍候","正在開啟分享畫面"),!liff.isApiAvailable("shareTargetPicker"))throw new Error("您的裝置不支援此功能，請嘗試重新開啟此頁面或更新應用程式版本。");var e=await loginPromise;const i=new URL(liff.permanentLink.createUrl());i.searchParams.set("referral",e.userId);var t=this.getRenderedMsgs({imgur:this.selected,profile:e,share:i.href,text:this.text}),a=Date.now(),s=await liff.shareTargetPicker(t);if(1e3<Date.now()-a&&"success"!==_.get(s,"status"))throw new Error("您已取消分享");gtag("event","share",{campaign:campaign,content_type:`https://i.imgur.com/${this.selected}.png`,item_id:this.text.slice(0,100)}),await Swal.fire({icon:"success",title:"送出成功",text:"你可以繼續製作下一張卡片"})}catch(e){e.message=_.get(e,"response.data.message",e.message),console.error(window.errToPlainObj(e)),await Swal.fire({icon:"error",title:"送出失敗",text:e.message})}},async btnSelect(e){(await Swal.fire({cancelButtonText:"關閉",confirmButtonText:"選擇",imageUrl:`https://i.imgur.com/${e}.png`,showCancelButton:!0,customClass:{header:"px-0",image:"my-0"}})).value&&this.$set(this,"selected",e)},getRenderedMsgs(e){let t=this.render(e);return console.log(t),t=JSON5.parse(t),_.includes(["bubble","carousel"],_.get(t,"type"))&&(t={type:"flex",altText:this.$t("flexAltText"),contents:t}),t=_.castArray(t),t},showLoading(e,t){Swal.fire({title:e,text:t,allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{Swal.showLoading()}})},isLoading(){return Swal.isVisible()&&Swal.isLoading()},hideLoading(){Swal.close()},param(e,t){e=new URL(location).searchParams.get(e);return _.isNil(e)?t:e}}});</script></body></html>